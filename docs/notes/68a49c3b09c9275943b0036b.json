{
  "online_content": {
    "type": "doc",
    "content": [
      {
        "type": "codeBlock",
        "attrs": {
          "language": null
        },
        "content": [
          {
            "type": "text",
            "text": "provider \"aws\" {\n  region = var.aws_region\n}\n\nresource \"aws_security_group\" \"web_sg\" {\n  name        = \"web-sg\"\n  description = \"Allow SSH and HTTP access\"\n  vpc_id      = data.aws_vpc.default.id\n\n  ingress {\n    description = \"Allow SSH\"\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [var.my_ip_cidr]\n  }\n\n  ingress {\n    description = \"Allow HTTP\"\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  egress {\n    description = \"Allow all outbound\"\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = {\n    Name = \"web-sg\"\n  }\n}\n\ndata \"aws_vpc\" \"default\" {\n  default = true\n}\n\nresource \"aws_instance\" \"web_server\" {\n  ami                         = var.ami_id\n  instance_type               = var.instance_type\n  key_name                    = var.key_name\n  vpc_security_group_ids      = [aws_security_group.web_sg.id]\n  associate_public_ip_address = true\n  subnet_id                   = data.aws_subnet.public_subnet.id\n\n  user_data = <<-EOF\n              #!/bin/bash\n              yum update -y\n              amazon-linux-extras install nginx1 -y\n              systemctl enable nginx\n              systemctl start nginx\n              EOF\n\n  tags = {\n    Name = \"interview-nginx-server\"\n    Environment = \"production\"\n  }\n}\n\ndata \"aws_subnet\" \"public_subnet\" {\n  filter {\n    name   = \"default-for-az\"\n    values = [\"true\"]\n  }\n\n  filter {\n    name   = \"availability-zone\"\n    values = [data.aws_availability_zones.available.names[0]]\n  }\n}\n\ndata \"aws_availability_zones\" \"available\" {\n  state = \"available\"\n}\n"
          }
        ]
      }
    ]
  },
  "online_content_time": "2025-08-14T10:41:58.942Z"
}