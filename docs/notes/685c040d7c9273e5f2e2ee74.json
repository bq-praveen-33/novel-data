{
  "online_content": {
    "type": "doc",
    "content": [
      {
        "type": "heading",
        "attrs": {
          "level": 1
        },
        "content": [
          {
            "type": "text",
            "text": "Bug: too hard to fix \"Cannot update a component from inside the function body of a different component.\" "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(145, 152, 161)"
                }
              }
            ],
            "text": "#18178"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/login?return_to=https://github.com/facebook/react/issues/18178#issuecomment-595846312",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "prc-Button-ButtonBase-c50BI"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "New issue"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(255, 255, 255)"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Closed"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/pull/18330",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 fxWQtf prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": "#18330"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(255, 255, 255)"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Closed"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues/18178#top",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 gTTLya prc-Link-Link-85e08"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Bug: too hard to fix \"Cannot update a component from inside the function body of a different component.\""
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(145, 152, 161)"
                }
              }
            ],
            "text": "#18178"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/pull/18330",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 fxWQtf prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": "#18330"
          }
        ]
      },
      {
        "type": "image",
        "attrs": {
          "src": "https://avatars.githubusercontent.com/u/1082083?u=29e91400dbd4a9c217048a8f59562c4f740498e6&v=4&size=80",
          "alt": "@finom",
          "title": null,
          "width": 40,
          "height": 40
        }
      },
      {
        "type": "heading",
        "attrs": {
          "level": 2
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Description"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/finom",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 cyWlqy prc-Link-Link-85e08"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "finom"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": "opened "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues/18178#issue-572818021",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 hLbjXI prc-Link-Link-85e08"
                }
              }
            ],
            "text": "on Feb 28, 2020"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": " · edited by "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/gaearon",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 hLbjXI prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": "gaearon"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Edits"
          }
        ]
      },
      {
        "type": "heading",
        "attrs": {
          "level": 1
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Note: React 16.13.1 fixed some cases where this was overfiring. If upgrading React and ReactDOM to 16.13.1 doesn't fix the warning, read this: "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues/18178#issuecomment-595846312",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "issue-link js-issue-link"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "#18178 (comment)"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "React version:"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "16.13.0"
          }
        ]
      },
      {
        "type": "heading",
        "attrs": {
          "level": 2
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Steps To Reproduce"
          }
        ]
      },
      {
        "type": "orderedList",
        "attrs": {
          "tight": true,
          "start": 1,
          "type": null
        },
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Build a time machine."
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Go to the year 2017."
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Build a huge application of 10K lines of code."
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Get 80 (!) dependencies at package.json file including ones that become no longer maintained."
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Update React to the latest version at February 27, 2020."
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Get tons of errors that you don't know how to fix."
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Tell your client that fixes are going to take unknown time and it's going to cost $$$ + days or weeks of investigation or we're going to get stuck with the outdated version of React and related libraries forever which will cost more $$$ but later."
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "Being serious, the business I work for isn't interested on that at all. Obviously I'd never made it happen to get such warnings to appear if I'd get them earlier. Currently that's impossibly hard to make the errors to be fixed because I get them at many different cases and with a huge stack trace. I tried to fix at least one of the appearing errors and it already took a lot of time. I tried to debug some of used libraries but got no luck."
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "Just one example:"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "image",
        "attrs": {
          "src": "https://user-images.githubusercontent.com/1082083/75559100-8fcf5c80-5a4b-11ea-8173-4f0a62cc5de3.png",
          "alt": "image",
          "title": null,
          "width": null,
          "height": null
        }
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "There we can notice the use of an outdated react-router, an outdated redux-connect (which I had to put to the project source to fix errors of outdated "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "code"
              }
            ],
            "text": "componentWillReceiveProps"
          },
          {
            "type": "text",
            "text": " method), some HOCs created by recompose etc. It isn't just a simple virtual DOM tree where I can walk thru components developed by me and search by "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "code"
              }
            ],
            "text": "setState"
          },
          {
            "type": "text",
            "text": " string to fix the bug, that's way more complicated than that."
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "Please make an \"UNSAFE\" option to disable this error or provide a simpler way to find where the error is thrown 🙏"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(145, 152, 161)"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "👍"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "React with 👍26"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(145, 152, 161)"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "😄"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "React with 😄3"
          }
        ]
      },
      {
        "type": "heading",
        "attrs": {
          "level": 2
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Activity"
          }
        ]
      },
      {
        "type": "image",
        "attrs": {
          "src": "https://avatars.githubusercontent.com/u/1082083?s=64&u=29e91400dbd4a9c217048a8f59562c4f740498e6&v=4",
          "alt": "",
          "title": null,
          "width": 16,
          "height": 16
        }
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/finom",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "row-module__eventActorLink--h1DeD prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "finom"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "added"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues?q=state%3Aopen%20label%3A%22Status%3A%20Unconfirmed%22",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "labels-module__labelLink--H8Gx4 prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Status: Unconfirmed"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues?q=state%3Aopen%20label%3A%22Status%3A%20Unconfirmed%22",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "labels-module__labelLink--H8Gx4 prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": "A potential issue that we haven't yet confirmed as a bug"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues/18178#event-3082327723",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "row-module__timelineAgoLink--gny6d prc-Link-Link-85e08"
                }
              },
              {
                "type": "underline"
              }
            ],
            "text": "on Feb 28, 2020"
          }
        ]
      },
      {
        "type": "image",
        "attrs": {
          "src": "https://avatars.githubusercontent.com/u/63648?u=f1387d49fb1d3a6e7b26f0e5847eca5fa82c26a5&v=4&size=80",
          "alt": "sebmarkbage",
          "title": null,
          "width": 40,
          "height": 40
        }
      },
      {
        "type": "heading",
        "attrs": {
          "level": 3
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "sebmarkbage commented on Feb 28, 2020"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/sebmarkbage",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 fAtikO prc-Link-Link-85e08"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "sebmarkbage"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/facebook/react/issues/18178#issuecomment-592662192",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 crqFXp prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(145, 152, 161)"
                }
              }
            ],
            "text": "on Feb 28, 2020"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": " · edited by "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "link",
                "attrs": {
                  "href": "https://github.com/sebmarkbage",
                  "target": "_blank",
                  "rel": "noopener noreferrer nofollow",
                  "class": "Box-sc-g0xbh4-0 hLbjXI prc-Link-Link-85e08"
                }
              },
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              }
            ],
            "text": "sebmarkbage"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": ""
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Edits"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "textStyle",
                "attrs": {
                  "color": "rgb(145, 152, 161)"
                }
              },
              {
                "type": "bold"
              }
            ],
            "text": "Collaborator"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "I wish we had added this warning earlier. I'm sorry we didn't. It was an oversight with the introduction of Hooks. I believe this must be caused by newer code that uses Hooks, because there was already the same warning for classes much earlier so any earlier code would've already seen this warning."
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "Note that this will likely start hard failing in future versions of React. Intentional or otherwise (we've had a lot of bugs with this pattern). So regardless, you might end up getting stuck on an old version. If it's not possible to fix it, I'd recommend pinning to an older version of React."
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "However, that said, we want to help you and make it as easy as possible to fix these, including seeing if we can get help from library authors to publish fixed versions."
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "If you expand the little "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "code"
              }
            ],
            "text": ">"
          },
          {
            "type": "text",
            "text": " arrow in the Chrome console you should also see an additional Stack trace (in addition to the Component stack in your screen shot). Can you post that too? That should show you the exact callsite that is causing a side-effect in render."
          }
        ]
      }
    ]
  },
  "online_content_time": "2025-06-25T14:14:25.083Z"
}